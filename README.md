# Insurance Pro

## Начало работы с проектом

### 1. Требования к системе
Для запуска проекта вам потребуются:
* **JDK 21**
* **Node.js 20+** и **npm**
* **Docker** и **Docker Compose**

### 2. Стек технологий
#### Бэкенд:
* **Java 21**
* **Spring Boot 3.5.9** (Data JPA, Security)
* **PostgreSQL 17**
* **Liquibase** (миграции БД)
* **JWT** (авторизация)
* **Maven** (сборка)

#### Фронтенд:
* **React 19**
* **Vite** (сборка)
* **Ant Design** (UI компоненты)
* **Axios** (HTTP-клиент)
* **React Router** (навигация)

### 3. Структура проекта
* `insurance-pro-backend` — серверная часть на Spring Boot (Java).
* `insurance-pro-frontend` — клиентская часть на React (Vite, Ant Design).
* `docker-compose.yml` — файл для контейнеризации всех сервисов.
* `init-db.sql` — начальная инициализация базы данных.

### 4. Запуск проекта через Docker Compose
Запуск всей системы (БД + Бэкенд + Фронтенд) одной командой:
```bash
docker-compose up -d
```
* Фронтенд: [http://localhost:9090](http://localhost:9090)
* Бэкенд API: [http://localhost:8080](http://localhost:8080)

### 5. Запуск проекта в IntelliJ IDEA (Разработка)
Для локальной разработки компоненты запускаются отдельно, но **база данных всегда должна быть запущена в Docker**.

#### Шаг 1: Запуск БД
```bash
docker-compose up -d insurance-pro-db
```
База данных PostgreSQL будет доступна на `localhost:25432`.

#### Шаг 2: Запуск бэкенда
1. Откройте проект в IDEA.
2. Перейдите в модуль `insurance-pro-backend`.
3. Запустите основной класс `InsuranceprobackendApplication`.

#### Шаг 3: Запуск фронтенда
1. В терминале перейдите в папку `insurance-pro-frontend`:
   ```bash
   cd insurance-pro-frontend
   ```
2. Установите зависимости и запустите:
   ```bash
   npm install
   npm run dev
   ```
3. Фронтенд будет доступен по адресу, указанному в консоли (обычно `http://localhost:5173`).

---

## Требования к функциональности системы "InsurancePro":
1.1. Наименование проекта
Информационная система "InsurancePro" для автоматизации деятельности страховой компании
1.2. Назначение и цели
Система предназначена для автоматизации процессов страховой компании, включая управление клиентами, оформление договоров
страхования и ведение статистической отчетности.

2. Функциональные требования
   2.1. Регистрация и авторизация
   Требования:
   Доступ к функциям системы возможен только после успешной авторизации
   Неавторизованным пользователям отображается только страница входа
   Реализовать форму входа с валидацией данных
   Обеспечить безопасное хранение паролей (хэширование)
   Сессия пользователя должна сохраняться при закрытии браузера (опционально)
   Возможность выхода из системы
   2.2. Отображение данных предметной области в таблице
   Требования:
   Табличное представление списка клиентов с колонками: ФИО, паспортные данные, контакты, дата регистрации
   Табличное представление списка договоров с колонками: номер договора, клиент, тип страхования, статус, даты действия,
   страховая премия
   Пагинация данных при большом количестве записей
   Адаптивный дизайн таблиц для различных разрешений экрана
   Индикатор загрузки данных при обращении к серверу
   2.3. Управление данными (CRUD операции)
   Требования к клиентам:
   Форма добавления нового клиента с полями: ФИО, серия паспорта, номер паспорта, телефон, email
   Валидация обязательных полей (ФИО, паспортные данные)
   Проверка уникальности паспортных данных
   Форма редактирования существующего клиента
   Функция удаления клиента с подтверждением операции
   Обработка зависимых записей (невозможность удаления клиента с активными договорами)
   Требования к договорам:
   Форма оформления нового договора с полями: выбор клиента, тип страхования, дата начала, дата окончания, страховая
   премия
   Автоматическая генерация номера договора
   Валидация дат (дата окончания > даты начала)
   Форма редактирования договора
   Функция изменения статуса договора (активен, расторгнут, исполнен)
   Удаление договоров с подтверждением операции
   2.4. Поиск и вывод записей
   Требования:
   Поиск клиентов по ФИО (частичное совпадение)
   Поиск клиентов по паспортным данным (точное совпадение)
   Поиск договоров по номеру договора
   Фильтрация договоров по типу страхования (ОСАГО, КАСКО, недвижимость, жизнь)
   Фильтрация договоров по статусу (активен, расторгнут, исполнен)
   Фильтрация договоров по периоду действия
   Комбинированная фильтрация по нескольким параметрам
   Отображение количества найденных записей
   2.5. Сортировка записей
   Требования:
   Сортировка клиентов по ФИО (А-Я, Я-А)
   Сортировка клиентов по дате регистрации (сначала новые/старые)
   Сортировка договоров по номеру
   Сортировка договоров по дате начала действия
   Сортировка договоров по страховой премии (по возрастанию/убыванию)
   Сортировка договоров по типу страхования
   Визуальное отображение активной сортировки в таблице
   Многоуровневая сортировка (опционально)
   2.6. Разделение ролей пользователей
   2.6.1. Роль "Страховой агент"
   Функциональные возможности:
   Просмотр списка клиентов (только своих)
   Добавление новых клиентов
   Оформление новых договоров страхования
   Просмотр и редактирование своих договоров
   Поиск и фильтрация клиентов и договоров
   Доступ к базовым статистическим данным
   2.6.2. Роль "Менеджер"
   Функциональные возможности:
   Все возможности страхового агента
   Просмотр всех клиентов компании
   Просмотр всех договоров компании
   Редактирование любых договоров
   Расширенная статистика и отчетность
   Управление типами страховых продуктов
   2.6.3. Роль "Администратор"
   Функциональные возможности:
   Все возможности менеджера
   Полное управление пользователями системы
   Назначение и изменение ролей пользователей
   Просмотр системных логов
   Управление справочной информацией
   Доступ ко всем административным функциям
   2.7. Статистические функции
   Требования:
   Отображение общего количества клиентов в системе
   Отображение общего количества договоров
   Статистика по типам страхования (количество договоров каждого типа)
   Средняя страховая премия по типам страхования
   Динамика заключения договоров по месяцам
   Круговая диаграмма распределения договоров по типам
   Столбчатая диаграмма по страховым премиям
   Возможность фильтрации статистики по периодам
   2.8. Пункт меню «Об авторе»
   Требования:
   Отдельная страница, доступная через главное меню системы
   Информация должна содержать:
   ФИО автора полностью
   Номер группы и наименование учебного заведения
   Контактные данные (email, телефон)
   Краткое описание опыта работы с использованными технологиями:
   Spring Boot MVC, Hibernate/JPA
   JavaScript/TypeScript
   PostgreSQL
   REST API
   Даты начала и завершения работ над проектом
   Ссылки на GitHub/LinkedIn (опционально)
   Профессиональное оформление страницы
   2.9. Обработка нештатных ситуаций
   Требования:
   Валидация данных на стороне клиента и сервера
   Информативные сообщения об ошибках:
   При некорректном вводе данных
   При использовании недопустимых значений
   При отсутствии данных по запросу
   При ошибках сети
   При ошибках сервера (500, 404, etc.)
   Всплывающие уведомления для пользователя
   Рекомендации по устранению ошибок
   Страница 404 для несуществующих маршрутов
   Обработка исключений при работе с БД
   Защита от SQL-инъекций
   Валидация форматов данных (email, телефон, даты)
3. Нефункциональные требования
   3.1. Требования к надежности
   Время отклика системы не более 3 секунд
   Обработка одновременных запросов от multiple пользователей
   Резервное копирование данных
   3.2. Требования к безопасности
   Аутентификация и авторизация пользователей
   Защита от XSS атак
   Валидация всех входных данных
   HTTPS протокол (для production)
   3.3. Требования к интерфейсу
   Интуитивно понятный пользовательский интерфейс
   Адаптивный дизайн
   Соответствие современным стандартам UI/UX
4. Технические требования
   4.1. Серверная часть
   Java 21
   Spring Boot
   Spring Security
   Spring Data JPA
   PostgreSQL
   Maven
   4.2. Клиентская часть
   JavaScript
   HTML5, CSS3
   Axios для HTTP-запросов
   Библиотеки для UI компонентов - Ant Design
   4.3. База данных
   PostgreSQL